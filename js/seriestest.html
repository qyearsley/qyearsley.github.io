<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Convergent Series Tester - Quinten Yearsley</title>
    <meta
      name="description"
      content="Test the convergence of infinite series by computing partial sums."
    />
    <link rel="stylesheet" href="/style.css" />
    <style>
      #output {
        margin: 1em;
        border: 1px solid gray;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>Convergent Series Tester</h1>
        <p>Test the convergence of infinite series by computing partial sums</p>
      </header>

      <main class="main-content">
        <section class="section">
          <p>
            A <b>series</b> is the sum of the terms in a sequence. For some sequences, the more
            terms are added, the closer the sum gets to some finite number. Such series are set to
            <b>converge</b>.
          </p>

          <p>
            Below, you can approximate the sum of an infinite sequence by computing
            <i>&Sigma;(n=0, N)f(n)</i> for some large <i>N</i>.
          </p>

          <form id="form" action="javascript:void(update())">
            <table>
              <tr>
                <td>f(n) =</td>
                <td><input id="f" type="text" value="1 / Math.pow(2, n)" /></td>
              </tr>
              <tr>
                <td>N =</td>
                <td><input id="N" type="text" value="100" /></td>
                <td><input type="submit" /></td>
              </tr>
            </table>
          </form>

          <div id="output"></div>

          <h2>Some convergent series to try</h2>
          <table border="1">
            <thead>
              <tr>
                <th>Series</th>
                <th>JavaScript</th>
                <th>Converges to</th>
              </tr>
            </thead>
            <tr>
              <td>Geometric series (r=1/2)</td>
              <td><code>1 / Math.pow(2, n)</code></td>
              <td>2</td>
            </tr>
            <tr>
              <td>Geometric series (r=1/3)</td>
              <td><code>1 / Math.pow(3, n)</code></td>
              <td>1.5</td>
            </tr>
            <tr>
              <td>1/n² series</td>
              <td><code>1 / Math.pow(n + 1, 2)</code></td>
              <td>π²/6 ≈ 1.645</td>
            </tr>
            <tr>
              <td>1/n! series</td>
              <td><code>1 / factorial(n)</code></td>
              <td>e ≈ 2.718</td>
            </tr>
            <tr>
              <td>Alternating series</td>
              <td><code>Math.pow(-1, n) / (n + 1)</code></td>
              <td>ln(2) ≈ 0.693</td>
            </tr>
          </table>

          <p>
            <small
              >Note: For the factorial function, you'll need to define it first:
              <code>function factorial(n) { return n <= 1 ? 1 : n * factorial(n-1); }</code></small
            >
          </p>
        </section>

        <section class="section">
          <h2>Navigation</h2>
          <ul class="external-links">
            <li><a href="/js/">← Back to JavaScript experiments</a></li>
            <li><a href="/">← Back to main page</a></li>
          </ul>
        </section>
      </main>
    </div>

    <script>
      /**
       * Quinten Yearsley
       * Created 2008
       * Rewritten 2013
       */

      /**
       * Read the input and update the output contents.
       */
      function update() {
        var f = new Function("n", "return " + document.getElementById("f").value)
        var N = parseInt(document.getElementById("N").value)
        var terms = outputs(f, N)
        var terms_sum = sum(terms)
        var output = "&Sigma;(n=0," + N + ")f(n) = " + terms_sum
        output += "<br>&nbsp;&nbsp;&nbsp;&nbsp;"
        output += " = sum([" + terms.slice(0, 3) + ",...," + terms.slice(-1) + ")]"
        document.getElementById("output").innerHTML = output
      }

      /**
       * Make a list of the outputs of function f for each index from 1 to n.
       */
      function outputs(f, n) {
        var result = []
        for (var i = 0; i <= n; i++) {
          result.push(f(i))
        }
        return result
      }

      /**
       * Sum the items in an array.
       */
      function sum(arr) {
        var sum = 0
        for (var i = 0; i < arr.length; i++) {
          sum += arr[i]
        }
        return sum
      }
    </script>
  </body>
</html>
