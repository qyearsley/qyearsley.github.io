<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snake Grid Table - Quinten Yearsley</title>
    <meta
      name="description"
      content="Generate snake pattern grids with alternating row directions."
    />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>Snake Grid Table</h1>
        <p>Generate snake pattern grids with alternating row directions</p>
      </header>

      <main class="main-content">
        <section class="section">
          <time datetime="2017">Created 2017</time>
          <p>This was an answer for a short puzzle.</p>

          <form action="javascript:void()" style="font-family: monospace">
            Num Rows:
            <input
              id="num-rows"
              type="number"
              min="1"
              ,
              max="100"
              value="4"
            /><br />
            Num Cols:
            <input
              id="num-cols"
              type="number"
              min="1"
              ,
              max="100"
              value="5"
            /><br />
            <input id="submit" type="submit" />
          </form>

          <div id="out"></div>
        </section>

        <section class="section">
          <h2>Navigation</h2>
          <ul class="external-links">
            <li><a href="/js/">← Back to JavaScript experiments</a></li>
            <li><a href="/">← Back to main page</a></li>
          </ul>
        </section>
      </main>
    </div>

    <script>
      "use strict"

      function refreshTable() {
        const out = document.getElementById("out")
        out.innerHTML = ""
        const numRows = document.getElementById("num-rows").value
        const numCols = document.getElementById("num-cols").value
        out.appendChild(tableElement(snake(numRows, numCols)))
      }

      function tableElement(rows) {
        const table = document.createElement("table")
        for (let row of rows) {
          let tr = document.createElement("tr")
          for (let value of row) {
            let td = document.createElement("td")
            td.appendChild(document.createTextNode(value))
            tr.appendChild(td)
          }
          table.appendChild(tr)
        }
        return table
      }

      function snake(numRows, numCols) {
        // Make a 2d array of size numRows x numCols.
        const grid = []
        for (let row = 0; row < numRows; row++) {
          grid.push(new Array(numCols))
        }

        // Snake pattern: Left to right, alternating down and up.
        let n = 1
        for (let col = 0; col < numCols; col++) {
          if (col % 2 == 0) {
            for (let row = 0; row < numRows; row++) {
              grid[row][col] = n++
            }
          } else {
            for (let row = numRows - 1; row >= 0; row--) {
              grid[row][col] = n++
            }
          }
        }
        return grid
      }

      document.getElementById("submit").addEventListener("click", refreshTable)
    </script>
  </body>
</html>
