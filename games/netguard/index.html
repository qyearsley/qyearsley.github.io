<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NetGuard</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <style>
      /* Override breadcrumb styling for dark theme */
      .breadcrumbs {
        margin-bottom: 1.5rem;
        opacity: 0.7;
      }
      .breadcrumbs a {
        color: #4a9eff;
      }
      .breadcrumbs a:hover {
        color: #77b7ff;
      }
      .breadcrumbs .separator {
        color: #555;
      }
      .breadcrumbs .current {
        color: #d4d4d4;
      }
    </style>
  </head>
  <body>
    <a href="#mission-select" class="skip-link">Skip to level selection</a>
    <div class="game-container">
      <header>
        <h1>ğŸ›¡ï¸ NetGuard</h1>
        <p class="subtitle">Cybersecurity Investigation Training</p>
      </header>

      <!-- Level Selection Screen -->
      <div class="level-selection" id="level-selection">
        <nav class="breadcrumbs">
          <a href="/">Home</a>
          <span class="separator">/</span>
          <a href="/games/">Games</a>
          <span class="separator">/</span>
          <span class="current">NetGuard</span>
        </nav>
        <h2 id="mission-select">Select a Mission</h2>
        <div class="level-list" id="level-list">
          <!-- Level cards will be generated by JavaScript -->
        </div>
        <button class="reset-button" id="reset-button">ğŸ”„ Reset Progress</button>
      </div>

      <!-- Game Screen -->
      <div class="game-screen" id="game-screen" style="display: none">
        <div class="game-header">
          <div class="level-info" id="level-info"></div>
          <div class="progress-info" id="progress-info"></div>
          <button class="back-button" id="back-button">â† Back to Missions</button>
        </div>

        <div class="main-content">
          <!-- Network Map -->
          <div class="network-panel">
            <h2>Network Map</h2>
            <div class="network-map" id="network-map">
              <!-- Nodes will be generated by JavaScript -->
            </div>
            <div class="legend">
              <div><span class="status-dot healthy">ğŸŸ¢</span> Healthy</div>
              <div><span class="status-dot suspicious">ğŸŸ¡</span> Suspicious</div>
              <div><span class="status-dot compromised">ğŸ”´</span> Compromised</div>
              <div><span class="status-dot unexamined">ğŸ”µ</span> Unexamined</div>
            </div>

            <!-- NPC Panel -->
            <div class="npc-panel">
              <h3>ğŸ‘¥ Personnel</h3>
              <div class="npc-info" id="npc-info">Select a node to see available personnel</div>
              <button class="npc-button" id="talk-button" disabled>Talk to Personnel</button>
            </div>
          </div>

          <!-- Terminal/Investigation Panel -->
          <div class="terminal-panel">
            <h2>SSH Terminal</h2>
            <div
              class="terminal-output"
              id="terminal-output"
              role="log"
              aria-live="polite"
              aria-label="System terminal output"
            >
              <!-- Terminal content will be generated by JavaScript -->
            </div>
            <div class="command-interface">
              <div class="available-commands" id="available-commands">
                <!-- Command buttons will be generated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- NPC Dialog Modal -->
      <div
        class="dialog-modal"
        id="dialog-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="dialog-npc"
      >
        <div class="dialog-content">
          <div class="dialog-header">
            <span class="dialog-npc" id="dialog-npc"></span>
            <button class="dialog-close" id="dialog-close" aria-label="Close dialog">Ã—</button>
          </div>
          <div class="dialog-body" id="dialog-body"></div>
          <div class="dialog-actions">
            <button class="dialog-button" id="dialog-continue">Continue</button>
          </div>
        </div>
      </div>

      <!-- Victory Modal -->
      <div
        class="victory-modal"
        id="victory-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="victoryHeading"
      >
        <div class="victory-content">
          <h2>ğŸ‰ Mission Complete!</h2>
          <div id="victory-message"></div>
          <button class="victory-button" id="next-level">Next Level</button>
          <button class="victory-button secondary" id="back-to-levels">Back to Missions</button>
        </div>
      </div>

      <!-- Interactive Tool Modal -->
      <div
        class="tool-modal"
        id="tool-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="tool-title"
      >
        <div class="tool-content">
          <div class="tool-header">
            <span class="tool-title" id="tool-title"></span>
            <button class="tool-close" id="tool-close" aria-label="Close tool">Ã—</button>
          </div>
          <div class="tool-body">
            <div class="tool-input-section">
              <label id="tool-input-label">Input:</label>
              <textarea id="tool-input" rows="4"></textarea>
              <button class="tool-button" id="tool-execute">Execute</button>
            </div>
            <div class="tool-output" id="tool-output"></div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="game.js"></script>
  </body>
</html>
