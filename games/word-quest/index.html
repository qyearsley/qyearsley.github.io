<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word Quest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <style>
      /* Debug - ensure content is visible */
      #game-container {
        display: block !important;
        visibility: visible !important;
        min-height: 100vh;
      }

      /* Override breadcrumb styling for quest theme */
      #title-screen .breadcrumbs {
        margin-bottom: 1rem;
        justify-content: center;
      }
      #title-screen .breadcrumbs a {
        color: #c17817;
        font-weight: 600;
      }
      #title-screen .breadcrumbs a:hover {
        color: #d4922f;
      }
      #title-screen .breadcrumbs .separator {
        color: #d4a574;
      }
      #title-screen .breadcrumbs .current {
        color: #8b5a00;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div id="game-container" role="main" aria-label="Word Quest Game">
      <!-- Title Screen -->
      <div id="title-screen" class="screen active" role="region" aria-label="Title screen">
        <nav class="breadcrumbs" aria-label="Breadcrumb navigation">
          <a href="/">Home</a>
          <span class="separator">/</span>
          <a href="/games/">Games</a>
          <span class="separator">/</span>
          <span class="current" aria-current="page">Word Quest</span>
        </nav>
        <h1 class="game-title">üìú Word Quest üóùÔ∏è</h1>
        <p class="subtitle">Decode the ancient words!</p>
        <div class="title-buttons">
          <button id="start-button" class="big-button" aria-label="Start a new quest">Start Quest</button>
          <button id="continue-button" class="big-button hidden" aria-label="Continue your previous quest">Continue Quest</button>
          <button id="start-fresh-button" class="secondary-button hidden" aria-label="Start a fresh quest, resetting all progress">New Quest</button>
        </div>
      </div>

      <!-- Settings Screen -->
      <div id="settings-screen" class="screen" role="region" aria-label="Game settings">
        <div class="header">
          <h2>Choose Your Decoder Rank</h2>
        </div>

        <div class="settings-content">
          <div class="setting-group">
            <h3 id="difficulty-label">Difficulty Level</h3>
            <div class="difficulty-options" role="radiogroup" aria-labelledby="difficulty-label">
              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="explorer" checked aria-describedby="explorer-desc" />
                <div class="difficulty-card">
                  <div class="difficulty-icon" aria-hidden="true">üåü</div>
                  <h4>Explorer</h4>
                  <p id="explorer-desc">Kindergarten - 1st Grade</p>
                  <ul>
                    <li>Letter sounds</li>
                    <li>Simple 2-3 letter words</li>
                    <li>Basic sight words</li>
                  </ul>
                </div>
              </label>

              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="adventurer" aria-describedby="adventurer-desc" />
                <div class="difficulty-card">
                  <div class="difficulty-icon" aria-hidden="true">‚≠ê‚≠ê</div>
                  <h4>Adventurer</h4>
                  <p id="adventurer-desc">1st - 2nd Grade</p>
                  <ul>
                    <li>Word families</li>
                    <li>3-5 letter words</li>
                    <li>More sight words</li>
                  </ul>
                </div>
              </label>

              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="master" aria-describedby="master-desc" />
                <div class="difficulty-card">
                  <div class="difficulty-icon" aria-hidden="true">‚≠ê‚≠ê‚≠ê</div>
                  <h4>Master</h4>
                  <p id="master-desc">2nd - 3rd Grade</p>
                  <ul>
                    <li>Complex patterns</li>
                    <li>Multi-syllable words</li>
                    <li>Advanced spelling</li>
                  </ul>
                </div>
              </label>
            </div>
          </div>

          <div class="setting-group">
            <h3 id="questions-label">Activities Per Level</h3>
            <div class="activities-options" role="radiogroup" aria-labelledby="questions-label">
              <label><input type="radio" name="questionsPerLevel" value="3" aria-label="3 activities per level, quick session" /> 3 (Quick)</label>
              <label><input type="radio" name="questionsPerLevel" value="5" checked aria-label="5 activities per level, standard session" /> 5 (Standard)</label>
              <label><input type="radio" name="questionsPerLevel" value="8" aria-label="8 activities per level, long session" /> 8 (Long)</label>
            </div>
          </div>

          <div class="setting-group">
            <h3 id="input-label">Input Mode</h3>
            <div class="input-options" role="radiogroup" aria-labelledby="input-label">
              <label><input type="radio" name="inputMode" value="multipleChoice" checked aria-label="Multiple choice input mode, easier" /> Multiple Choice (Easier)</label>
              <label><input type="radio" name="inputMode" value="keyboard" aria-label="Keyboard input mode, harder" /> Type Answers (Harder)</label>
            </div>
          </div>

          <div class="setting-group">
            <h3 id="audio-label">Audio Support</h3>
            <div class="audio-options">
              <label><input type="checkbox" name="audioHints" checked aria-describedby="audio-desc" /> Play word sounds</label>
              <p id="audio-desc" class="sr-only">Enable audio pronunciation of words using text-to-speech</p>
            </div>
          </div>
        </div>

        <button id="settings-start-button" class="big-button">Begin Quest</button>
      </div>

      <!-- Quest Map Screen -->
      <div id="quest-map" class="screen" role="region" aria-label="Quest map">
        <div class="header">
          <h2>Quest Map</h2>
          <button id="home-button" class="text-button" aria-label="Return to start screen">
            ‚Üê Home
          </button>
        </div>

        <div class="map-container">
          <div class="decoder-rank" role="status" aria-live="polite">
            <span id="rank-display" aria-label="Current decoder rank">Apprentice Decoder</span>
            <span id="stars-display" aria-label="Total stars earned">‚≠ê 0 Stars</span>
          </div>

          <div class="quest-paths" role="list" aria-label="Available quests">
            <!-- Quest areas will be dynamically added here -->
          </div>
        </div>

        <button id="settings-button" class="secondary-button" aria-label="Open settings">‚öôÔ∏è Settings</button>
      </div>

      <!-- Activity Screen -->
      <div id="activity-screen" class="screen" role="region" aria-label="Activity screen">
        <div class="header">
          <button id="back-to-map-button" class="nav-button" aria-label="Return to quest map">
            ‚Üê Map
          </button>
          <div class="activity-header-info">
            <h3 id="quest-name">Sound Cipher</h3>
            <div class="progress-info" role="status" aria-live="polite">
              <span id="activity-progress" aria-label="Current progress">Question 1 of 5</span>
              <span id="activity-stars" aria-label="Stars earned">‚≠ê 0</span>
            </div>
          </div>
        </div>

        <div class="activity-content">
          <div id="activity-question" class="question-area" role="region" aria-label="Question">
            <!-- Activity content will be dynamically generated -->
          </div>

          <div id="activity-choices" class="choices-area" role="radiogroup" aria-label="Answer choices">
            <!-- Choices will be dynamically generated -->
          </div>

          <div id="activity-feedback" class="feedback-area hidden" role="status" aria-live="assertive" aria-atomic="true">
            <!-- Feedback messages -->
          </div>
        </div>

        <div class="activity-controls">
          <button id="submit-answer" class="big-button" disabled aria-label="Submit your answer">Submit</button>
          <button id="next-activity" class="big-button hidden" aria-label="Go to next activity">Next ‚Üí</button>
        </div>
      </div>

      <!-- Level Complete Screen -->
      <div id="level-complete" class="screen" role="region" aria-label="Level completion">
        <div class="celebration">
          <h2>üéâ Quest Complete! üéâ</h2>
          <div id="completion-message" class="completion-message" role="status" aria-live="polite">
            <!-- Dynamic completion message -->
          </div>
          <div id="rewards-display" class="rewards" role="region" aria-label="Rewards earned">
            <!-- Rewards will be shown here -->
          </div>
          <div class="completion-buttons">
            <button id="continue-quest-button" class="big-button" aria-label="Continue to next level">Continue Quest</button>
            <button id="return-to-map-button" class="secondary-button" aria-label="Return to quest map">Return to Map</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Scripts -->
    <script type="module" src="js/storage.js"></script>
    <script type="module" src="js/WordBank.js"></script>
    <script type="module" src="js/GameState.js"></script>
    <script type="module" src="js/WordActivityGenerator.js"></script>
    <script type="module" src="js/GameUI.js"></script>
    <script type="module" src="js/SoundManager.js"></script>
    <script type="module" src="js/EventManager.js"></script>
    <script type="module" src="js/game.js"></script>
  </body>
</html>
